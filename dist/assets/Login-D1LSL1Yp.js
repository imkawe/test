import{r,u as f,a as v,j as e,L as N,b,y as n}from"./index-BmcAolYd.js";const k=()=>{const[o,p]=r.useState(""),[i,h]=r.useState(""),[t,y]=r.useState({}),l=f(),{setUser:x}=v(),j=async a=>{var c,u;a.preventDefault();try{const s=await b.post("http://localhost:8787/api/auth/login",{email:o,password:i});if(console.log("📡 Respuesta del backend en login:",s.data),s.data.success){if(n.success("✅ Login exitoso!"),s.data.success){const m=s.data.user,S={isLoggedIn:!0,userData:m};sessionStorage.setItem("userData",JSON.stringify(S)),x(m),l("/homeScreen")}const d=s.data.token,g=s.data.user;console.log("🔑 Token recibido:",d),console.log("👤 Usuario:",g),sessionStorage.setItem("authToken",d),sessionStorage.setItem("userData",JSON.stringify(g)),l("/homeScreen")}else n.error(s.data.message||"❌ Login fallido")}catch(s){console.error("🚨 Error en login:",s),n.error(((u=(c=s.response)==null?void 0:c.data)==null?void 0:u.message)||"Ocurrió un error, intenta nuevamente.")}};return e.jsxs("div",{className:"login-container",children:[e.jsx("h2",{children:"Iniciar Sesión"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",name:"email",placeholder:"Ingrese su email",value:o,onChange:a=>p(a.target.value)}),t.email&&e.jsx("span",{className:"error-message",children:t.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Contraseña"}),e.jsx("input",{type:"password",name:"password",placeholder:"Ingrese su contraseña",value:i,onChange:a=>h(a.target.value)}),t.password&&e.jsx("span",{className:"error-message",children:t.password})]}),e.jsx("button",{type:"submit",className:"login-btn",children:"Iniciar Sesión"})]}),e.jsxs("p",{style:{textAlign:"center"},children:["¿No tienes una cuenta?"," ",e.jsx(N,{to:"/signUp",className:"toggle-link",style:{color:"#007BFF",textDecoration:"underline"},children:"Regístrate"})]})]})};export{k as default};
