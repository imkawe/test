import{G as d,r as l,u as N,a as k,j as e,b as a,L,c as S,y as p}from"./index-CT1dYHP2.js";function b(t){return d({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function j(t){return d({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function C(t){return d({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}const B=()=>{const[t,f]=l.useState(""),[i,x]=l.useState(""),[s,n]=l.useState({}),[c,u]=l.useState(!1),v=N(),{setUser:y}=k(),w=()=>{const r={};return t?/\S+@\S+\.\S+/.test(t)||(r.email="Email inválido"):r.email="El email es obligatorio",i||(r.password="La contraseña es obligatoria"),r};return e("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-lg p-8 transition-all duration-300 hover:shadow-xl",children:[e("h2",{className:"text-3xl font-bold text-gray-800 text-center mb-8",children:"Iniciar Sesión"}),a("form",{onSubmit:async r=>{var h,g;r.preventDefault();const m=w();if(Object.keys(m).length>0){n(m);return}u(!0);try{const{data:o}=await S.post("https://cloudflare-d1.ujhuji.workers.dev/api/user/login",{email:t,password:i});o.success&&(p.success("¡Bienvenido de vuelta!"),sessionStorage.setItem("authToken",o.token),y({isLoggedIn:!0,userData:{...o.user,avatar:o.user.avatar||"/img1.png"}}),v("/homeScreen"))}catch(o){console.error("Error:",o),p.error(((g=(h=o.response)==null?void 0:h.data)==null?void 0:g.message)||"Credenciales incorrectas")}finally{u(!1)}},className:"space-y-6",children:[a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo Electrónico"}),a("div",{className:"relative",children:[e(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e("input",{type:"email",value:t,onChange:r=>{f(r.target.value),n({...s,email:""})},className:`w-full pl-10 pr-4 py-3 rounded-lg border ${s.email?"border-red-500":"border-gray-200"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"tucorreo@ejemplo.com"})]}),s.email&&a("p",{className:"text-red-500 text-sm mt-2 flex items-center",children:[e(b,{className:"mr-1"})," ",s.email]})]}),a("div",{children:[e("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"}),a("div",{className:"relative",children:[e(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e("input",{type:"password",value:i,onChange:r=>{x(r.target.value),n({...s,password:""})},className:`w-full pl-10 pr-4 py-3 rounded-lg border ${s.password?"border-red-500":"border-gray-200"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"••••••••"})]}),s.password&&a("p",{className:"text-red-500 text-sm mt-2 flex items-center",children:[e(b,{className:"mr-1"})," ",s.password]})]}),e("button",{type:"submit",disabled:c,className:`w-full py-3 px-4 rounded-lg bg-blue-600 text-white font-semibold transition-all ${c?"opacity-75 cursor-not-allowed":"hover:bg-blue-700 hover:shadow-md"}`,children:c?"Cargando...":"Iniciar Sesión"}),a("div",{className:"text-center mt-6",children:[e("span",{className:"text-gray-600",children:"¿No tienes cuenta? "}),e(L,{to:"/signUp",className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"Regístrate aquí"})]})]})]})})};export{B as default};
