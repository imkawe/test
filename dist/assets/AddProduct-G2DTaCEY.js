import{r as x,j as e,F as v,y as n,b as g}from"./index-BmcAolYd.js";import{M as C}from"./index-B7bUr05O.js";const k=()=>{const[t,d]=x.useState({name:"",image:[],unit:"",stock:"",price:"",discount:"",description:"",more_details:"{}",publish:!0}),[u,h]=x.useState(!1),a=i=>{d({...t,[i.target.name]:i.target.value})},b=async i=>{const o=i.target.files;if(!(o!=null&&o.length))return;h(!0);const c="dsho1poyl",l="ml_unsigned",s=[...t.image];try{await Promise.all(Array.from(o).map(async p=>{const m=new FormData;m.append("file",p),m.append("upload_preset",l);const j=await g.post(`https://api.cloudinary.com/v1_1/${c}/image/upload`,m);s.push(j.data.secure_url)})),n.success("¡Imágenes subidas!")}catch{n.error("Error subiendo imágenes")}d(p=>({...p,image:s})),h(!1)},f=i=>{d(o=>({...o,image:o.image.filter((c,l)=>l!==i)}))},y=async i=>{var c,l;i.preventDefault();const o=sessionStorage.getItem("authToken");if(!o){n.error("Inicia sesión primero");return}if(t.image.length===0)return n.warn("Sube al menos 1 imagen");if(t.discount>100||t.discount<0)return n.error("Descuento inválido");try{const s={...t,category_id:4,stock:Number(t.stock),price:Number(t.price),discount:Number(t.discount),more_details:JSON.parse(t.more_details)};await g.post("http://localhost:8787/api/products",s,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}),n.success("✔ Producto creado!"),d({name:"",image:[],unit:"",stock:"",price:"",discount:"",description:"",more_details:"{}",publish:!0})}catch(s){console.error("Error:",s),n.error(((l=(c=s.response)==null?void 0:c.data)==null?void 0:l.error)||"Error desconocido")}};return e.jsxs("div",{style:r.container,children:[e.jsxs("header",{style:r.header,children:[e.jsx("h1",{style:r.title,children:"Nuevo Producto"}),e.jsx("p",{style:r.subtitle,children:"Registra los detalles de tu producto"})]}),e.jsxs("form",{onSubmit:y,style:r.form,children:[e.jsxs("div",{style:r.grid,children:[e.jsxs("div",{style:r.formColumn,children:[e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{style:r.label,children:"Nombre del Producto*"}),e.jsx("input",{name:"name",value:t.name,onChange:a,style:r.input,placeholder:"Ej: Zapatos deportivos",required:!0})]}),e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{style:r.label,children:"Precio (USD)*"}),e.jsxs("div",{style:r.inputWithSymbol,children:[e.jsx("span",{style:r.currency,children:"$"}),e.jsx("input",{type:"number",name:"price",value:t.price,onChange:a,style:{...r.input,paddingLeft:"32px"},min:"0",step:"0.01",required:!0})]})]}),e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{style:r.label,children:"Descuento (%)"}),e.jsx("input",{type:"number",name:"discount",value:t.discount,onChange:a,style:r.input,min:"0",max:"100",placeholder:"0-100%"})]})]}),e.jsxs("div",{style:r.formColumn,children:[e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{style:r.label,children:"Stock Disponible*"}),e.jsx("input",{type:"number",name:"stock",value:t.stock,onChange:a,style:r.input,min:"0",placeholder:"Cantidad en inventario",required:!0})]}),e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{style:r.label,children:"Unidad de Medida*"}),e.jsx("div",{style:r.selectWrapper,children:e.jsxs("select",{name:"unit",value:t.unit,onChange:a,style:r.select,required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar unidad"}),e.jsx("option",{value:"unidad",children:"Unidad"}),e.jsx("option",{value:"par",children:"Par"}),e.jsx("option",{value:"kg",children:"Kilogramo"}),e.jsx("option",{value:"litro",children:"Litro"})]})})]}),e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{style:r.label,children:"Estado"}),e.jsxs("div",{style:r.switchContainer,children:[e.jsxs("label",{style:r.switch,children:[e.jsx("input",{type:"checkbox",checked:t.publish,onChange:i=>d(o=>({...o,publish:i.target.checked}))}),e.jsx("span",{style:r.slider})]}),e.jsx("span",{style:r.switchLabel,children:t.publish?"Público":"Oculto"})]})]})]})]}),e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{style:r.label,children:"Descripción Detallada*"}),e.jsx("textarea",{name:"description",value:t.description,onChange:a,style:{...r.input,...r.textarea},placeholder:"Describe características principales del producto",rows:4,required:!0})]}),e.jsxs("div",{style:r.formGroup,children:[e.jsx("label",{style:r.label,children:"Imágenes del Producto*"}),e.jsxs("div",{style:r.uploadArea,onClick:()=>document.getElementById("fileInput").click(),children:[e.jsx(v,{style:r.uploadIcon}),e.jsxs("div",{style:r.uploadTextContainer,children:[e.jsx("p",{style:r.uploadMainText,children:u?"Subiendo archivos...":"Arrastra tus imágenes aquí"}),e.jsx("p",{style:r.uploadSubText,children:"Formatos soportados: PNG, JPG (Máx. 10MB)"})]}),e.jsx("input",{type:"file",id:"fileInput",hidden:!0,multiple:!0,onChange:b,accept:"image/*"})]}),e.jsx("div",{style:r.imageGrid,children:t.image.map((i,o)=>e.jsxs("div",{style:r.imageCard,children:[e.jsx("img",{src:i,alt:`Vista previa ${o}`,style:r.imagePreview}),e.jsx("button",{type:"button",style:r.deleteButton,onClick:()=>f(o),children:e.jsx(C,{style:r.deleteIcon})})]},o))})]}),e.jsx("button",{type:"submit",style:r.submitButton,disabled:u,children:u?"Publicando...":"Publicar Producto"})]})]})},r={container:{maxWidth:"1000px",margin:"2rem auto",padding:"2rem",backgroundColor:"#ffffff",borderRadius:"16px",boxShadow:"0 8px 30px rgba(0,0,0,0.12)"},header:{textAlign:"center",marginBottom:"2rem"},title:{fontSize:"2rem",fontWeight:"700",color:"#1a202c",marginBottom:"0.5rem"},subtitle:{fontSize:"1rem",color:"#718096"},form:{display:"flex",flexDirection:"column",gap:"2rem"},grid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem","@media (max-width: 768px)":{gridTemplateColumns:"1fr"}},formColumn:{display:"flex",flexDirection:"column",gap:"1.5rem"},formGroup:{display:"flex",flexDirection:"column",gap:"0.75rem"},label:{fontSize:"0.875rem",fontWeight:"600",color:"#2d3748"},input:{width:"100%",padding:"0.875rem 1rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"1rem",backgroundColor:"#f8fafc",transition:"all 0.2s ease",":focus":{outline:"none",borderColor:"#4299e1",boxShadow:"0 0 0 3px rgba(66, 153, 225, 0.2)"}},textarea:{height:"120px",resize:"vertical"},inputWithSymbol:{position:"relative"},currency:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#718096",fontSize:"1rem"},selectWrapper:{position:"relative"},select:{appearance:"none",width:"100%",padding:"0.875rem 1rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"1rem",backgroundColor:"#f8fafc"},switchContainer:{display:"flex",alignItems:"center",gap:"0.75rem"},switch:{position:"relative",display:"inline-block",width:"48px",height:"28px"},slider:{position:"absolute",cursor:"pointer",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"#e2e8f0",transition:"0.4s",borderRadius:"34px",":before":{position:"absolute",content:'""',height:"20px",width:"20px",left:"4px",bottom:"4px",backgroundColor:"white",transition:"0.4s",borderRadius:"50%"}},switchLabel:{fontSize:"0.875rem",color:"#4a5568"},uploadArea:{border:"2px dashed #cbd5e0",borderRadius:"12px",padding:"2rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:"#f8fafc",transition:"all 0.2s ease",minHeight:"180px",":hover":{borderColor:"#4299e1",backgroundColor:"#ebf8ff"}},uploadIcon:{fontSize:"2.5rem",color:"#718096",marginBottom:"1rem"},uploadTextContainer:{textAlign:"center"},uploadMainText:{color:"#2d3748",fontWeight:"500",margin:"0"},uploadSubText:{color:"#718096",fontSize:"0.875rem",margin:"0.5rem 0 0"},imageGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem",marginTop:"1.5rem"},imageCard:{position:"relative",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease",":hover":{transform:"translateY(-2px)"}},imagePreview:{width:"100%",height:"150px",objectFit:"cover"},deleteButton:{position:"absolute",top:"8px",right:"8px",background:"rgba(255,255,255,0.9)",borderRadius:"50%",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",border:"none",cursor:"pointer"},deleteIcon:{color:"#e53e3e",fontSize:"1.25rem"},submitButton:{width:"100%",padding:"1rem",backgroundColor:"#4299e1",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",":hover":{backgroundColor:"#3182ce"},":disabled":{opacity:"0.7",cursor:"not-allowed"}}};export{k as default};
