import{j as e,b as t,e as v,E as p,w as y,H as D}from"./index-CT1dYHP2.js";const A=({order:a,onClose:g})=>{var d,c,r,o,m;if(!a)return null;const u=l=>{const s={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(l).toLocaleDateString("es-ES",s)},b=l=>{const s=l.unit_price*l.quantity*l.discount/100;return{percentage:l.discount,amount:s,originalTotal:l.unit_price*l.quantity,finalPrice:l.total_price}},N=l=>!l||Object.keys(l).length===0?null:t("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border",children:[e("h4",{className:"font-semibold mb-3 text-blue-600 text-sm",children:"Detalles Específicos:"}),e("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(l).map(([s,i])=>t("div",{className:"flex items-center justify-between border-b pb-2",children:[t("span",{className:"capitalize text-gray-600 font-medium text-sm",children:[s.replace(/_/g," "),":"]}),typeof i=="string"&&i.startsWith("http")?e("img",{src:i,alt:s,className:"w-14 h-14 object-cover rounded-lg border shadow-sm"}):e("span",{className:"text-gray-800 text-sm",children:i})]},s))})]});return e("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:t("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[e("button",{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",onClick:g,children:"✕"}),t("div",{className:"text-center mb-6",children:[t("h2",{className:"text-2xl font-bold text-blue-600",children:["Detalles Completo del Pedido #",a.order_id]}),e("p",{className:"text-sm text-gray-500 mt-2",children:u(a.created_at)})]}),t("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[t("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e(v,{className:"text-blue-500"})," Dirección de Entrega"]}),a.address?t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[e("p",{className:"font-medium",children:"Dirección:"}),e("p",{children:((d=a.address)==null?void 0:d.address_line)||"N/A"})]}),t("div",{children:[e("p",{className:"font-medium",children:"Ciudad/Estado:"}),t("p",{children:[((c=a.address)==null?void 0:c.city)||"N/A",", ",((r=a.address)==null?void 0:r.state)||"N/A"]})]}),t("div",{children:[e("p",{className:"font-medium",children:"Código Postal:"}),e("p",{children:((o=a.address)==null?void 0:o.pincode)||"N/A"})]}),t("div",{children:[e("p",{className:"font-medium",children:"Teléfono:"}),e("p",{children:((m=a.address)==null?void 0:m.mobile)||"N/A"})]})]}):e("p",{className:"text-red-500",children:"Dirección no disponible"})]}),e("div",{className:`p-4 rounded-lg mb-6 ${a.status==="CANCELLED"?"bg-red-100":a.status==="COMPLETED"?"bg-green-100":"bg-yellow-100"}`,children:t("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e(p,{className:"text-purple-500"})," Estado Actual:",e("span",{className:`px-3 py-1 rounded-full text-sm ${a.status==="CANCELLED"?"bg-red-200 text-red-800":a.status==="COMPLETED"?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800"}`,children:a.status})]})}),t("div",{className:"mb-6",children:[t("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e(p,{className:"text-green-500"})," Productos Adquiridos"]}),e("div",{className:"space-y-4",children:a.items.map((l,s)=>{const i=Array.isArray(l.image)?l.image:JSON.parse(l.image||"[]"),h=b(l),n=l.more_details||{};return t("div",{className:"border rounded-lg p-4",children:[e("div",{className:"flex gap-4 mb-3 flex-wrap",children:i.map((x,f)=>e("img",{src:x,alt:l.name,className:"w-20 h-20 object-cover rounded border"},f))}),t("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[t("div",{children:[e("p",{className:"font-medium",children:"Producto:"}),e("p",{className:"font-semibold",children:l.name})]}),t("div",{children:[e("p",{className:"font-medium",children:"Precio Unitario:"}),t("p",{children:["$",parseFloat(l.unit_price).toFixed(2)]})]}),t("div",{children:[e("p",{className:"font-medium",children:"Cantidad:"}),e("p",{children:l.quantity})]}),t("div",{children:[e("p",{className:"font-medium",children:"Total:"}),t("p",{className:"text-green-600 font-bold",children:["$",l.total_price.toFixed(2)]})]})]}),n&&Object.keys(n).length>0&&N(n),l.discount>0&&e("div",{className:"mt-4 bg-blue-50 p-3 rounded-lg",children:t("p",{className:"font-semibold text-blue-800",children:["Descuento aplicado: ",h.percentage,"%",t("span",{className:"block text-sm font-normal",children:["(Ahorro: $",h.amount.toFixed(2),")"]})]})})]},s)})})]}),t("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e(y,{className:"text-green-500"})," Resumen Financiero"]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[e("p",{className:"font-medium",children:"Total de Productos:"}),e("p",{children:a.items.length})]}),t("div",{children:[e("p",{className:"font-medium",children:"Total General:"}),t("p",{className:"text-2xl font-bold text-blue-600",children:["$",a.total_amt.toFixed(2)]})]})]})]}),e("div",{className:"mt-6 flex justify-end",children:t("button",{onClick:()=>window.print(),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e(D,{})," Imprimir Comprobante"]})})]})})};export{A as default};
