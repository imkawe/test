import{r as u,j as a,b as t,l as x,L as d,m as y,f as N}from"./index-CT1dYHP2.js";const v=()=>{const[n,o]=u.useState([]);u.useEffect(()=>{const e=JSON.parse(sessionStorage.getItem("cart"))||[];o(e)},[]);const h=e=>{o(e),sessionStorage.setItem("cart",JSON.stringify(e)),window.dispatchEvent(new Event("cartUpdated"))},i=(e,s,c,g)=>{const f=n.map(r=>r.id===e&&r.color===s&&r.size===c?{...r,quantity:Math.max(0,r.quantity+g)}:r).filter(r=>r.quantity>0);h(f)},p=e=>{if(Array.isArray(e))return e[0];try{const s=JSON.parse(e);return Array.isArray(s)?s[0]:e}catch{return e||"/placeholder.jpg"}},m=(e,s)=>s?(e*(1-s/100)).toFixed(2):e.toFixed(2),l=n.reduce((e,s)=>{const c=m(s.price,s.discount);return{totalOriginal:e.totalOriginal+s.price*s.quantity,totalDiscounted:e.totalDiscounted+c*s.quantity,totalItems:e.totalItems+s.quantity,totalSavings:e.totalSavings+(s.price-c)*s.quantity}},{totalOriginal:0,totalDiscounted:0,totalItems:0,totalSavings:0});return a("div",{className:"max-w-4xl mx-auto px-4 py-8 min-h-screen",children:t("div",{className:"bg-white rounded-xl shadow-lg p-6 md:p-8",children:[t("div",{className:"mb-8 text-center",children:[t("h1",{className:"text-3xl font-bold text-gray-900 flex items-center justify-center gap-2",children:[a(x,{className:"text-emerald-600"}),"Tu Carrito"]}),t("p",{className:"text-gray-500 mt-2",children:[l.totalItems," artículo",l.totalItems!==1&&"s"," en tu carrito"]})]}),n.length>0?t("div",{className:"space-y-8",children:[a("div",{className:"space-y-6",children:n.map(e=>{const s=m(e.price,e.discount);return t("div",{className:"flex flex-col md:flex-row items-center gap-6 p-4 bg-white rounded-xl border border-gray-100 shadow-sm",children:[a("div",{className:"w-32 h-32 flex-shrink-0 bg-white p-2 border rounded-lg",children:a("img",{src:p(e.image),alt:e.name,className:"w-full h-full object-contain"})}),t("div",{className:"flex-1 w-full text-center md:text-left space-y-2",children:[a("h3",{className:"text-lg font-semibold text-gray-900",children:a(d,{to:`/product/${e.id}`,className:"hover:text-emerald-600 transition-colors",children:e.name})}),t("div",{className:"flex gap-2 text-sm justify-center md:justify-start",children:[e.color&&t("span",{className:"bg-emerald-100 text-emerald-800 px-2 py-1 rounded-full",children:["Color: ",e.color]}),e.size&&t("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Talla: ",e.size]})]}),t("div",{className:"flex items-center gap-2 flex-wrap justify-center md:justify-start",children:[e.discount>0&&t("span",{className:"line-through text-gray-400",children:["$",e.price.toFixed(2)]}),t("span",{className:"text-emerald-600 font-medium",children:["$",s]}),e.discount>0&&t("span",{className:"text-red-500 text-sm",children:["(-",e.discount,"%)"]})]})]}),t("div",{className:"flex items-center gap-3 bg-gray-50 rounded-full p-2",children:[a("button",{onClick:()=>i(e.id,e.color,e.size,-1),className:"w-10 h-10 rounded-full bg-white text-emerald-600 hover:bg-emerald-50 transition-colors flex items-center justify-center shadow-sm",children:a(y,{size:14})}),a("span",{className:"text-lg font-medium w-6 text-gray-700",children:e.quantity}),a("button",{onClick:()=>i(e.id,e.color,e.size,1),className:"w-10 h-10 rounded-full bg-white text-emerald-600 hover:bg-emerald-50 transition-colors flex items-center justify-center shadow-sm",children:a(N,{size:14})})]})]},`${e.id}-${e.color}-${e.size}`)})}),t("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-100",children:[a("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Resumen de compra"}),t("div",{className:"space-y-4",children:[t("div",{className:"flex justify-between",children:[t("span",{className:"text-gray-600",children:["Subtotal (",l.totalItems," items):"]}),t("span",{className:"font-medium text-gray-900",children:["$",l.totalOriginal.toFixed(2)]})]}),l.totalSavings>0&&t("div",{className:"flex justify-between text-red-500",children:[a("span",{children:"Ahorras:"}),t("span",{className:"font-medium",children:["-$",l.totalSavings.toFixed(2)]})]}),t("div",{className:"flex justify-between",children:[a("span",{className:"text-gray-600",children:"Envío:"}),a("span",{className:"text-emerald-600 font-medium",children:"Gratis"})]}),t("div",{className:"pt-4 border-t border-gray-200 flex justify-between",children:[a("span",{className:"text-lg font-semibold",children:"Total a pagar:"}),t("span",{className:"text-xl font-bold text-gray-900",children:["$",l.totalDiscounted.toFixed(2)]})]})]}),a(d,{to:"/checkout",className:"mt-6 w-full flex items-center justify-center gap-2 py-4 px-6 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-semibold transition-colors shadow-md",children:"Proceder al Pago"})]})]}):a("div",{className:"text-center py-12",children:t("div",{className:"max-w-md mx-auto",children:[a(x,{className:"text-6xl text-gray-200 mx-auto mb-4"}),a("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Carrito vacío"}),a("p",{className:"text-gray-500 mb-6",children:"Agrega productos para continuar"}),a(d,{to:"/",className:"inline-block px-8 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors font-medium shadow-md",children:"Explorar Productos"})]})})]})})};export{v as default};
