import{r,u as f,a as v,j as e,L as N,b,y as n}from"./index-BmcAolYd.js";const k=()=>{const[o,p]=r.useState(""),[i,h]=r.useState(""),[t,y]=r.useState({}),l=f(),{setUser:x}=v(),j=async a=>{var c,u;a.preventDefault();try{const s=await b.post("http://localhost:8787/api/auth/login",{email:o,password:i});if(console.log("ðŸ“¡ Respuesta del backend en login:",s.data),s.data.success){if(n.success("âœ… Login exitoso!"),s.data.success){const m=s.data.user,S={isLoggedIn:!0,userData:m};sessionStorage.setItem("userData",JSON.stringify(S)),x(m),l("/homeScreen")}const d=s.data.token,g=s.data.user;console.log("ðŸ”‘ Token recibido:",d),console.log("ðŸ‘¤ Usuario:",g),sessionStorage.setItem("authToken",d),sessionStorage.setItem("userData",JSON.stringify(g)),l("/homeScreen")}else n.error(s.data.message||"âŒ Login fallido")}catch(s){console.error("ðŸš¨ Error en login:",s),n.error(((u=(c=s.response)==null?void 0:c.data)==null?void 0:u.message)||"OcurriÃ³ un error, intenta nuevamente.")}};return e.jsxs("div",{className:"login-container",children:[e.jsx("h2",{children:"Iniciar SesiÃ³n"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",name:"email",placeholder:"Ingrese su email",value:o,onChange:a=>p(a.target.value)}),t.email&&e.jsx("span",{className:"error-message",children:t.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ContraseÃ±a"}),e.jsx("input",{type:"password",name:"password",placeholder:"Ingrese su contraseÃ±a",value:i,onChange:a=>h(a.target.value)}),t.password&&e.jsx("span",{className:"error-message",children:t.password})]}),e.jsx("button",{type:"submit",className:"login-btn",children:"Iniciar SesiÃ³n"})]}),e.jsxs("p",{style:{textAlign:"center"},children:["Â¿No tienes una cuenta?"," ",e.jsx(N,{to:"/signUp",className:"toggle-link",style:{color:"#007BFF",textDecoration:"underline"},children:"RegÃ­strate"})]})]})};export{k as default};
